---
title: simple stress testing tool
date: 2016-01-21 01:48:10
tags:
- test
- tool
---

ä»‹ç»ä¸¤æ¬¾ç®€å•çš„å‹åŠ›æµ‹è¯•è½¯ä»¶[webbench](http://home.tiscali.cz/~cz210552/webbench.html)å’Œ[siege](https://www.joedog.org/)ï¼Œä½¿ç”¨èµ·æ¥éƒ½éå¸¸æ–¹ä¾¿ã€‚

## siege
è¿™è¿˜æ˜¯2BBçš„æ‰¾äº†åŠå¤©ï¼Œç„¶ååœ¨è‡ªå·±æœºå™¨ä¸Šç¼–è¯‘å®‰è£…çš„äº§ç‰©...ç»“æœåæ¥å‘ç°macè‡ªå¸¦webbencï¼Œæ¬²å“­æ— æ³ªå•Šã€‚
### å®‰è£…

```bash
curl -O http://download.joedog.org/siege/siege-latest.tar.gz
tar -zxvf siege-latest.tar.gz
cd siege-*
./configure
make && make install
```
### ä½¿ç”¨å®ä¾‹

```bash
siege -c 10 -t 10M https://www.baidu.com        # å¹¶å‘æ•°10æŒç»­æ—¶é—´10minçš„è¯·æ±‚ç™¾åº¦
siege -t 100s -f url.txt                        # æŒç»­è¯·æ±‚url.txtä¸­çš„urlåˆ—è¡¨100s,æ¯æ¬¡å–ä¸€ä¸ªurl
```
### å‚æ•°è¯¦è§£

```bash
 -C | â€“config               # åœ¨å±å¹•ä¸Šæ‰“å°æ˜¾ç¤ºå‡ºå½“å‰çš„é…ç½®,é…ç½®æ˜¯åŒ…æ‹¬åœ¨ä»–çš„é…ç½®æ–‡ä»¶$HOME/.siegercä¸­
                            #    å¯ä»¥ç¼–è¾‘é‡Œé¢çš„å‚æ•°,è¿™æ ·æ¯æ¬¡siege éƒ½ä¼šæŒ‰ç…§å®ƒè¿è¡Œ
 -v                         # è¿è¡Œæ—¶èƒ½çœ‹åˆ°è¯¦ç»†çš„è¿è¡Œä¿¡æ¯
 -c n | â€“concurrent=n       # æ¨¡æ‹Ÿæœ‰nä¸ªç”¨æˆ·åœ¨åŒæ—¶è®¿é—®,nä¸è¦è®¾å¾—å¤ªå¤§,å› ä¸ºè¶Šå¤§,siege æ¶ˆè€—æœ¬åœ°æœºå™¨çš„èµ„æºè¶Šå¤š
 -i | â€“internet             # éšæœºè®¿é—®urls.txtä¸­çš„urlåˆ—è¡¨é¡¹,ä»¥æ­¤æ¨¡æ‹ŸçœŸå®çš„è®¿é—®æƒ…å†µ(éšæœºæ€§),å½“urls.txtå­˜åœ¨æ˜¯æœ‰æ•ˆ
 -d n | â€“delay=n            # hitæ¯ä¸ªurlä¹‹é—´çš„å»¶è¿Ÿ,åœ¨0-nä¹‹é—´
 -r n | â€“reps=n             # é‡å¤è¿è¡Œæµ‹è¯•næ¬¡,ä¸èƒ½ä¸ -tåŒæ—¶å­˜åœ¨
 -t n | â€“time=n             # æŒç»­è¿è¡Œsiege â€˜nâ€™ç§’(å¦‚10S),åˆ†é’Ÿ(10M),å°æ—¶(10H)
 -l                         # è¿è¡Œç»“æŸ,å°†ç»Ÿè®¡æ•°æ®ä¿å­˜åˆ°æ—¥å¿—æ–‡ä»¶ä¸­siege.log
                            #    ä¸€èˆ¬ä½äº/usr/local/var/siege .logä¸­,ä¹Ÿå¯åœ¨.siegercä¸­è‡ªå®šä¹‰
 -R SIEGERC | â€“rc=SIEGERC   # æŒ‡å®šç”¨ç‰¹å®šçš„siege é…ç½®æ–‡ä»¶æ¥è¿è¡Œ,é»˜è®¤çš„ä¸º$HOME/.siegerc
 -f FILE | â€“file=FILE       # æŒ‡å®šç”¨ç‰¹å®šçš„urlsæ–‡ä»¶è¿è¡Œsiege ,é»˜è®¤ä¸ºurls.txt,ä½äºsiege å®‰è£…ç›®å½•ä¸‹çš„etc/urls.txt
 -u URL | â€“url=URL          # æµ‹è¯•æŒ‡å®šçš„ä¸€ä¸ªURL,å¯¹å®ƒè¿›è¡Œâ€siege â€œ,æ­¤é€‰é¡¹ä¼šå¿½ç•¥æœ‰å…³urlsæ–‡ä»¶çš„è®¾å®š
 ```
<!-- more -->
### ç»“æœè¯´æ˜

```bash
Transactions: 30000 hits                # å®Œæˆ30000æ¬¡å¤„ç†
Availability: 100.00 %                  # 100.00 % æˆåŠŸç‡
Elapsed time: 68.59 secs                # æ€»å…±ä½¿ç”¨æ—¶é—´
Data transferred: 817.76 MB             # å…±æ•°æ®ä¼ è¾“ 817.76 MB
Response time: 0.04 secs                # å“åº”æ—¶é—´ï¼Œæ˜¾ç¤ºç½‘ç»œè¿æ¥çš„é€Ÿåº¦
Transaction rate: 437.38 trans/sec      # å¹³å‡æ¯ç§’å®Œæˆ 437.38 æ¬¡å¤„ç†
Throughput: 11.92 MB/sec                # å¹³å‡æ¯ç§’ä¼ é€æ•°æ®
Concurrency: 17.53                      # å®é™…æœ€é«˜å¹¶å‘è¿æ¥æ•°
Successful transactions: 30000          # æˆåŠŸå¤„ç†æ¬¡æ•°
Failed transactions: 0                  # å¤±è´¥å¤„ç†æ¬¡æ•°
Longest transaction: 3.12               # æ¯æ¬¡ä¼ è¾“æ‰€èŠ±æœ€é•¿æ—¶é—´
Shortest transaction: 0.00              # æ¯æ¬¡ä¼ è¾“æ‰€èŠ±æœ€çŸ­æ—¶é—´
```

## webbench
webbenchæ˜¯ä¸€æšå¼ºå¤§å¾—å¯ä»¥çš„å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œå®ƒæœ€å¤šå¯ä»¥æ¨¡æ‹Ÿ3ä¸‡ä¸ªå¹¶å‘è¿æ¥å»æµ‹è¯•ç½‘ç«™çš„è´Ÿè½½èƒ½åŠ›ã€‚ä½¿ç”¨æ–¹æ³•è·Ÿsiegeå¤§è‡´ç›¸åŒï¼Œåªæ˜¯åœ¨å‚æ•°ä¸Šæœ‰äº›è®¸å·®åˆ«ã€‚

### ä½¿ç”¨å®ä¾‹

```bash
webbench -c 10 -t 10 https://www.baidu.com        # å¹¶å‘æ•°10æŒç»­æ—¶é—´10sçš„è¯·æ±‚ç™¾åº¦
webbench -t 100 -f https://www.baidu.com          # å¼ºåˆ¶è¯·æ±‚100sç™¾åº¦ï¼Œä¸ç­‰å¾…è¿”å›ç»“æœ
```
### å‚æ•°è¯¦è§£

```bash
 -f | --force                   # ä¸ç­‰å¾…æœåŠ¡å™¨è¿”å›ç»“æœç»§ç»­å‘èµ·è¯·æ±‚
 -r | --reload                  # è¯·æ±‚å¤´éƒ¨ä¿¡æ¯å¸¦no-caheå‚æ•°ï¼šPragma: no-cache.
 -t | --time <sec>              # è¯·æ±‚æŒç»­æ—¶é—´ï¼Œé»˜è®¤30s
 -p | --proxy <server:port>     # ä½¿ç”¨ä»£ç†æœåŠ¡å™¨è¯·æ±‚
 -c | --clients <n>             # ä¸€æ¬¡å‘èµ·næ¬¡è¯·æ±‚ï¼Œå³è¯·æ±‚å¹¶å‘
 -9 | --http09                  # ä½¿ç”¨HTTP/0.9åè®®è¯·æ±‚
 -1 | --http10                  # ä½¿ç”¨HTTP/1.0åè®®è¯·æ±‚
 -2 | --http11                  # ä½¿ç”¨HTTP/1.1åè®®è¯·æ±‚
 --get                          # ä½¿ç”¨getæ–¹æ³•è¯·æ±‚
 --head                         # ä½¿ç”¨headæ–¹æ³•è¯·æ±‚
 --options                      # ä½¿ç”¨optionsæ–¹æ³•è¯·æ±‚
 --trace                        # ä½¿ç”¨traceæ–¹æ³•è¯·æ±‚
 -? | -h | --help               # å¸®åŠ©ä¿¡æ¯
 -V | --version                 # æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
```

## YY
è¦æ˜¯æœ‰å‡ å°æœºå™¨ä¸€è‡´è¯·æ±‚ä¸€ä¸‹åˆ«äººçš„æœåŠ¡å™¨åº”è¯¥è¿˜æ˜¯è›®å¥½ç©çš„ğŸ˜±